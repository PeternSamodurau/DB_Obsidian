[[Proect]][[application.properties]]

bot.name=Peters_exchange_rates_bot  
bot.token=7818580465:AAFs1RCec51ldZBpvA0oejTTzezh0jxb_-s

service.file_info.uri=https://api.telegram.org/bot{bot.token}/getFile?file_id={fileId}  
service.file_storage.uri=https://api.telegram.org/file/bot{bot.token}/{filePath}

Эти две строки описывают **два ключевых шага** в работе с файлами, которые пользователи отправляют вашему Telegram-боту. Давайте разберем их по порядку.

Это типичная логика для взаимодействия с файлами через Bot API Telegram.

### 1. service.file_info.uri=https://api.telegram.org/bot{bot.token}/getFile?file_id={fileId}

- **Что это такое:** Это URL для запроса **информации о файле**.
    
- **Назначение:** Когда пользователь отправляет вашему боту файл (фото, видео, документ, аудио и т.д.), Telegram присылает вашему боту обновление (Update). В этом обновлении содержится file_id (идентификатор файла). Однако этот file_id сам по себе не является прямой ссылкой для скачивания файла. Чтобы получить прямую ссылку, вам нужно сначала запросить дополнительную информацию о файле.
    
- **Как это работает:**
    
    1. Ваш бот получает file_id из входящего обновления (например, из поля message.photo[0].file_id для фотографии или message.document.file_id для документа).
        
    2. Вы делаете HTTP GET-запрос к этому URL, подставив свой bot.token и полученный file_id.
        
    3. В ответ Telegram пришлет JSON-объект, содержащий различные метаданные о файле, включая его размер (file_size), MIME-тип и, самое главное, **file_path** (путь к файлу на серверах Telegram).
        
- **Важно:** Этот запрос **НЕ скачивает сам файл**, он лишь предоставляет информацию о нем, включая путь, необходимый для скачивания.
    

### 2. service.file_storage.uri=https://api.telegram.org/file/bot{bot.token}/{filePath}

- **Что это такое:** Это URL для **прямого скачивания файла**.
    
- **Назначение:** После того как вы получили file_path из ответа на запрос getFile (из пункта 1), вы можете использовать его, чтобы сформировать полную ссылку для скачивания файла.
    
- **Как это работает:**
    
    1. Вы получили file_path (например, "documents/file_0.pdf") из ответа на предыдущий запрос.
        
    2. Вы подставляете свой bot.token и полученный filePath в этот URL.
        
    3. Выполняете HTTP GET-запрос к получившейся ссылке.
        
    4. В ответ вы получите **сырые байты файла**, которые вы можете сохранить на своем сервере или обработать.
        
- **Важно:** Файлы на серверах Telegram хранятся временно (обычно около 1 часа после загрузки). Поэтому вам нужно скачать их как можно скорее, если вы планируете их долгосрочное хранение или обработку.
    

### Общий процесс (workflow) работы с файлами в Telegram Bot API:

1. **Пользователь отправляет файл** боту.
    
2. Бот получает **Update** от Telegram, содержащий file_id (и другие метаданные, кроме самого содержимого файла).
    
3. Бот использует file_id для вызова метода getFile (URI из пункта 1: https://api.telegram.org/bot{bot.token}/getFile?file_id={fileId}).
    
4. Telegram отвечает JSON-объектом, содержащим, среди прочего, **file_path**.
    
5. Бот использует полученный file_path и свой bot.token для формирования **полной ссылки для скачивания** (URI из пункта 2: https://api.telegram.org/file/bot{bot.token}/{filePath}).
    
6. Бот делает HTTP GET-запрос к этой ссылке и **скачивает сам файл**.
    
7. Бот обрабатывает или сохраняет скачанный файл.
    

Эти две строки являются фундаментальными для любого бота, которому нужно работать с файлами, отправленными пользователями. Большинство библиотек для работы с Telegram Bot API (например, python-telegram-bot, telegraf.js, Telegram.Bot для C#) абстрагируют эти шаги, делая их более простыми для разработчика.


